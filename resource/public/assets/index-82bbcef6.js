import{d as J,aI as K,Z as O,r as x,i as Z,m as s,o as c,e as p,q as o,b,a as n,aJ as C,x as i,c as j,F as G,t as Q,v as _,z as W,M as y,aK as w,N as g,aL as X,p as Y,f as ee,g as te}from"./index-812ea633.js";const ae=u=>(Y("data-v-923c0baf"),u=u(),ee(),u),oe={class:"t-row t-row--space-between t-row--align-center"},se=ae(()=>b("div",{class:"receiver-title"},"消息中心",-1)),ne=["innerHTML"],le={name:"Receiver"},ce=J({...le,setup(u){const l=K(),{msgData:h,current:v,pageSize:f,total:R}=O(l),V=[{label:"每页 10 条",value:10},{label:"每页 30 条",value:30},{label:"每页 100 条",value:100},{label:"每页 50 条",value:50}];l.getList();const I=e=>{console.log("page-size:",e),g.success(`pageSize变化为${e}`)},M=(e,a)=>{console.log(a)},N=e=>{console.log(e)},L=e=>{console.log(e)},B=()=>{const e=[];for(const a of h.value)a.status===1&&e.push(a.id);l.batchUpdateMsgStatus(e,()=>{g.success("操作成功")})},D=e=>{l.updateMsgStatus({id:e,status:2},()=>{g.success("操作成功")})},d=x(!1),r=x(-1),T=Z(()=>r.value>-1?"删除后，消息无法恢复":""),U=e=>{r.value=e,d.value=!0},z=()=>{r.value=-1},P=async()=>{await X(r.value),d.value=!1,g.success("删除成功"),z(),l.getList()},$=()=>{z()};return(e,a)=>{const m=s("t-button"),S=s("t-tag"),k=s("t-space"),F=s("t-collapse-panel"),H=s("t-collapse"),q=s("t-pagination"),A=s("t-dialog");return c(),p(k,{direction:"vertical",size:"large",style:{width:"100%"}},{default:o(()=>[b("div",oe,[se,n(m,{size:"medium",onClick:C(B,["stop"])},{default:o(()=>[i("全部已读")]),_:1},8,["onClick"])]),n(H,{onChange:L},{default:o(()=>[(c(!0),j(G,null,Q(_(h),t=>(c(),p(F,{key:t.id,value:t.id,header:t.title},{headerRightContent:o(()=>[n(k,{size:"small"},{default:o(()=>[n(S,null,{default:o(()=>[i(W(t.tag),1)]),_:2},1024),t.status===2?(c(),p(S,{key:0},{default:o(()=>[i("已读 ")]),_:1})):y("",!0),t.status===1?(c(),p(m,{key:1,size:"small",onClick:C(E=>D(t.id),["stop"])},{default:o(()=>[i("设为已读")]),_:2},1032,["onClick"])):y("",!0),n(m,{size:"small",onClick:C(E=>U(t.id),["stop"])},{default:o(()=>[i("删除")]),_:2},1032,["onClick"])]),_:2},1024)]),default:o(()=>[b("div",{innerHTML:t.content},null,8,ne)]),_:2},1032,["value","header"]))),128))]),_:1}),n(q,{modelValue:_(v),"onUpdate:modelValue":a[0]||(a[0]=t=>w(v)?v.value=t:null),pageSize:_(f),"onUpdate:pageSize":a[1]||(a[1]=t=>w(f)?f.value=t:null),total:_(R),"show-sizer":"","page-size-options":V,onChange:N,onPageSizeChange:I,onCurrentChange:M},null,8,["modelValue","pageSize","total"]),n(A,{visible:d.value,"onUpdate:visible":a[2]||(a[2]=t=>d.value=t),header:"确认删除当前消息？",body:T.value,"on-cancel":$,onConfirm:P},null,8,["visible","body"])]),_:1})}}});const ue=te(ce,[["__scopeId","data-v-923c0baf"]]);export{ue as default};
