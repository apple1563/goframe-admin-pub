import{d as y,r as c,ai as C,aj as L,j,m as s,o as f,c as E,v,e as I,q as a,a as t,M,b1 as x,N as g}from"./index-fd6a2e45.js";import{R as B}from"./constants-22cde1fe.js";const A=y({__name:"AddUser",setup(N){const m=c(null),o=c({username:"",password:"",roleId:0}),V={value:"id",label:"name"},i=c([]),d=C(),p=L();j(()=>{p.getRoleListForSelect().then(()=>{i.value=p.roleListForSelect})});const _=()=>{d.setAddVisible(!1)},b=()=>{m.value.reset()},w=()=>{m.value.validate({showErrorMessage:!0}).then(async l=>{var e,n;if(l===!0){await x({...o.value}),g.success("新增成功"),d.getUserList(),d.getUserTreeList(),_();return}if(l&&Object.keys(l).length){const r=(n=(e=Object.values(l)[0])==null?void 0:e[0])==null?void 0:n.message;g.warning(r)}})};return(l,e)=>{const n=s("t-input"),r=s("t-form-item"),U=s("t-select"),S=s("t-form"),k=s("t-space"),h=s("t-dialog");return f(),E("div",null,[v(d).addVisible?(f(),I(h,{key:0,size:"large",visible:!0,header:"新增用户","on-confirm":w,onClose:_},{default:a(()=>[t(k,{direction:"vertical",size:"large",style:{width:"100%"}},{default:a(()=>[t(S,{ref_key:"form",ref:m,data:o.value,rules:v(B),onReset:b},{default:a(()=>[t(r,{label:"用户名",name:"username"},{default:a(()=>[t(n,{modelValue:o.value.username,"onUpdate:modelValue":e[0]||(e[0]=u=>o.value.username=u),placeholder:"请输入"},null,8,["modelValue"])]),_:1}),t(r,{label:"用户密码",name:"password"},{default:a(()=>[t(n,{modelValue:o.value.password,"onUpdate:modelValue":e[1]||(e[1]=u=>o.value.password=u),placeholder:"请输入"},null,8,["modelValue"])]),_:1}),t(r,{label:"角色",name:"menuId"},{default:a(()=>[t(U,{modelValue:o.value.roleId,"onUpdate:modelValue":e[2]||(e[2]=u=>o.value.roleId=u),keys:V,class:"form-item-content",options:i.value,placeholder:"请选择用户角色",clearable:""},null,8,["modelValue","options"])]),_:1})]),_:1},8,["data","rules"])]),_:1})]),_:1})):M("",!0)])}}});export{A as _};
