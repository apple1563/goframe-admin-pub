import{d as P,r as _,ax as z,w as q,i as G,aE as H,m as s,o as f,c as J,e as V,q as l,a as e,v as x,aF as K,x as n,M as S,aG as Q,N as y,aH as W,g as X}from"./index-9f7c584d.js";const Y=P({__name:"editMenu",props:{selectedMenuData:Object},setup(C){const c=C,D={keys:{label:"title",value:"id",children:"children"}},U=_(null),a=_(c.selectedMenuData),b=z();q(()=>c.selectedMenuData,()=>{a.value=c.selectedMenuData});const E=()=>{a.value.isRoot===1&&(a.value.pid=0)},F=()=>{U.value.validate({showErrorMessage:!0}).then(i=>{var t,d;if(i===!0){Q(a.value).then(()=>{y.success("修改成功"),b.getMenuTreeList()});return}if(i&&Object.keys(i).length){const m=(d=(t=Object.values(i)[0])==null?void 0:t[0])==null?void 0:d.message;y.warning(m)}})},p=_(!1),v=_(-1),R=G(()=>v.value>-1?"删除后，菜单关联权限将被清空，且无法恢复":""),g=()=>{v.value=-1},A=()=>{g()},B=H(),I=async()=>{await W(v.value),p.value=!1,y.success("删除成功"),g(),b.getMenuTreeList(),B.buildAsyncRoutes(),a.value.id=0},L=()=>{v.value=a.value.id,p.value=!0};return(i,t)=>{const d=s("t-radio-button"),m=s("t-radio-group"),o=s("t-form-item"),N=s("t-tree-select"),r=s("t-input"),O=s("t-input-number"),T=s("t-form"),h=s("t-divider"),k=s("t-button"),M=s("t-col"),w=s("t-space"),j=s("t-dialog");return f(),J("div",null,[a.value&&a.value.id?(f(),V(w,{key:0,direction:"vertical",size:"large",style:{width:"100%"}},{default:l(()=>[e(T,{ref_key:"form",ref:U,data:a.value,rules:x(K)},{default:l(()=>[e(o,{"label-width":0},{default:l(()=>[e(o,{class:"w-p45",label:"类型",name:"type"},{default:l(()=>[e(m,{modelValue:a.value.type,"onUpdate:modelValue":t[0]||(t[0]=u=>a.value.type=u)},{default:l(()=>[e(d,{value:1},{default:l(()=>[n("目录")]),_:1}),e(d,{value:2},{default:l(()=>[n("菜单")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(o,{label:"上级",name:"pid"},{default:l(()=>[e(N,{modelValue:a.value.pid,"onUpdate:modelValue":t[1]||(t[1]=u=>a.value.pid=u),disabled:a.value.isRoot===1,"tree-props":D,data:x(b).menuTreeListOnlyFolder},null,8,["modelValue","disabled","data"])]),_:1})]),_:1}),e(o,{"label-width":0},{default:l(()=>[e(o,{class:"w-p45",label:"名称",name:"title"},{default:l(()=>[e(r,{modelValue:a.value.title,"onUpdate:modelValue":t[2]||(t[2]=u=>a.value.title=u),placeholder:"请输入"},null,8,["modelValue"])]),_:1}),e(o,{label:"图标",name:"icon"},{default:l(()=>[e(r,{modelValue:a.value.icon,"onUpdate:modelValue":t[3]||(t[3]=u=>a.value.icon=u),placeholder:"请输入"},null,8,["modelValue"])]),_:1})]),_:1}),e(o,{"label-width":0},{default:l(()=>[e(o,{class:"w-p45",label:"路由地址",name:"path"},{default:l(()=>[e(r,{modelValue:a.value.path,"onUpdate:modelValue":t[4]||(t[4]=u=>a.value.path=u),placeholder:"请输入"},null,8,["modelValue"])]),_:1}),e(o,{label:"路由别名",name:"name"},{default:l(()=>[e(r,{modelValue:a.value.name,"onUpdate:modelValue":t[5]||(t[5]=u=>a.value.name=u),placeholder:"请输入"},null,8,["modelValue"])]),_:1})]),_:1}),e(o,{"label-width":0},{default:l(()=>[e(o,{class:"w-p45",label:"组件路径",name:"component"},{default:l(()=>[e(r,{modelValue:a.value.component,"onUpdate:modelValue":t[6]||(t[6]=u=>a.value.component=u),placeholder:"请输入"},null,8,["modelValue"])]),_:1}),a.value.type===1?(f(),V(o,{key:0,label:"默认跳转",name:"redirect"},{default:l(()=>[e(r,{modelValue:a.value.redirect,"onUpdate:modelValue":t[7]||(t[7]=u=>a.value.redirect=u),placeholder:"请输入"},null,8,["modelValue"])]),_:1})):S("",!0)]),_:1}),e(o,{"label-width":0},{default:l(()=>[e(o,{label:"菜单排序",name:"sort"},{default:l(()=>[e(O,{modelValue:a.value.sort,"onUpdate:modelValue":t[8]||(t[8]=u=>a.value.sort=u),placeholder:"请输入"},null,8,["modelValue"])]),_:1})]),_:1}),e(o,{"label-width":0},{default:l(()=>[e(o,{class:"w-p45",label:"根路由",name:"isRoot"},{default:l(()=>[e(m,{modelValue:a.value.isRoot,"onUpdate:modelValue":t[9]||(t[9]=u=>a.value.isRoot=u),onChange:E},{default:l(()=>[e(d,{value:1},{default:l(()=>[n("启用")]),_:1}),e(d,{value:2},{default:l(()=>[n("禁用")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(o,{label:"页签固定",name:"affix"},{default:l(()=>[e(m,{modelValue:a.value.affix,"onUpdate:modelValue":t[10]||(t[10]=u=>a.value.affix=u)},{default:l(()=>[e(d,{value:1},{default:l(()=>[n("启用")]),_:1}),e(d,{value:2},{default:l(()=>[n("禁用")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(o,{"label-width":0},{default:l(()=>[e(o,{class:"w-p45",label:"简化路由",name:"alwaysShow"},{default:l(()=>[e(m,{modelValue:a.value.alwaysShow,"onUpdate:modelValue":t[11]||(t[11]=u=>a.value.alwaysShow=u)},{default:l(()=>[e(d,{value:1},{default:l(()=>[n("启用")]),_:1}),e(d,{value:2},{default:l(()=>[n("禁用")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(o,{label:"缓存路由",name:"keepAlive"},{default:l(()=>[e(m,{modelValue:a.value.keepAlive,"onUpdate:modelValue":t[12]||(t[12]=u=>a.value.keepAlive=u)},{default:l(()=>[e(d,{value:1},{default:l(()=>[n("启用")]),_:1}),e(d,{value:2},{default:l(()=>[n("禁用")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(o,{"label-width":0},{default:l(()=>[e(o,{label:"是否外链",name:"isFrame"},{default:l(()=>[e(m,{modelValue:a.value.isFrame,"onUpdate:modelValue":t[13]||(t[13]=u=>a.value.isFrame=u)},{default:l(()=>[e(d,{value:1},{default:l(()=>[n("启用")]),_:1}),e(d,{value:2},{default:l(()=>[n("禁用")]),_:1})]),_:1},8,["modelValue"])]),_:1}),a.value.isFrame===1?(f(),V(o,{key:0,label:"外链地址",name:"frameSrc"},{default:l(()=>[e(r,{modelValue:a.value.frameSrc,"onUpdate:modelValue":t[14]||(t[14]=u=>a.value.frameSrc=u),placeholder:"请输入"},null,8,["modelValue"])]),_:1})):S("",!0)]),_:1}),e(o,{"label-width":0},{default:l(()=>[e(o,{class:"w-p45",label:"是否隐藏",name:"hidden"},{default:l(()=>[e(m,{modelValue:a.value.hidden,"onUpdate:modelValue":t[15]||(t[15]=u=>a.value.hidden=u)},{default:l(()=>[e(d,{value:1},{default:l(()=>[n("启用")]),_:1}),e(d,{value:2},{default:l(()=>[n("禁用")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(o,{class:"w-p45",label:"状态",name:"status"},{default:l(()=>[e(m,{modelValue:a.value.status,"onUpdate:modelValue":t[16]||(t[16]=u=>a.value.status=u)},{default:l(()=>[e(d,{value:1},{default:l(()=>[n("启用")]),_:1}),e(d,{value:2},{default:l(()=>[n("禁用")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["data","rules"]),e(h),e(w,null,{default:l(()=>[e(M,null,{default:l(()=>[e(k,{type:"button",onClick:F},{default:l(()=>[n("保存")]),_:1})]),_:1}),e(M,null,{default:l(()=>[e(k,{type:"button",onClick:L},{default:l(()=>[n("删除")]),_:1})]),_:1})]),_:1})]),_:1})):(f(),V(w,{key:1,direction:"vertical",size:"large",style:{width:"100%"}},{default:l(()=>[n("请选择左侧菜单")]),_:1})),e(j,{visible:p.value,"onUpdate:visible":t[17]||(t[17]=u=>p.value=u),header:"确认删除当前菜单？",body:R.value,"on-cancel":A,onConfirm:I},null,8,["visible","body"])])}}});const $=X(Y,[["__scopeId","data-v-be81c102"]]);export{$ as default};
