import{d as h,at as w,r as c,w as k,m,o as E,c as A,a,q as r,v as p,aw as C,N as f}from"./index-9f7c584d.js";import{R as y}from"./constants-ff30c5f4.js";const j=h({__name:"EditApi",setup(S){const s=w(),i=c(null),e=c({url:"",method:"",remark:""});k(()=>s.editVisible,l=>{l&&(e.value=s.currentRow)});const d=()=>{s.setEditVisible(!1)},_=()=>{i.value.reset()},v=()=>{i.value.validate({showErrorMessage:!0}).then(async l=>{var t,o;if(l===!0){await C({...e.value}),f.success("修改成功"),s.getApiList(),d();return}if(l&&Object.keys(l).length){const n=(o=(t=Object.values(l)[0])==null?void 0:t[0])==null?void 0:o.message;f.warning(n)}})};return(l,t)=>{const o=m("t-input"),n=m("t-form-item"),b=m("t-form"),V=m("t-space"),g=m("t-dialog");return E(),A("div",null,[a(g,{size:"large",visible:p(s).editVisible,header:"修改API","on-confirm":v,onClose:d},{default:r(()=>[a(V,{direction:"vertical",size:"large",style:{width:"100%"}},{default:r(()=>[a(b,{ref_key:"form",ref:i,data:e.value,rules:p(y),onReset:_},{default:r(()=>[a(n,{label:"url",name:"url"},{default:r(()=>[a(o,{modelValue:e.value.url,"onUpdate:modelValue":t[0]||(t[0]=u=>e.value.url=u),disabled:"",placeholder:"请输入"},null,8,["modelValue"])]),_:1}),a(n,{label:"method",name:"method"},{default:r(()=>[a(o,{modelValue:e.value.method,"onUpdate:modelValue":t[1]||(t[1]=u=>e.value.method=u),disabled:"",placeholder:"请输入"},null,8,["modelValue"])]),_:1}),a(n,{label:"备注",name:"remark"},{default:r(()=>[a(o,{modelValue:e.value.remark,"onUpdate:modelValue":t[2]||(t[2]=u=>e.value.remark=u),placeholder:"请输入"},null,8,["modelValue"])]),_:1})]),_:1},8,["data","rules"])]),_:1})]),_:1},8,["visible"])])}}});export{j as _};
