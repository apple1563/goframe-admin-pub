import{d as Ce,u as Ne,r as de,i as Te,j as Ie,n as fe,k as Pe,l as Ee,w as re,m as j,o as Oe,e as $e,q as R,a as k,b as ie,v as Re,Q as me,y as Ve,g as Be}from"./index-fd6a2e45.js";import{L as Ge}from"./date-37a4c1a7.js";import{g as pe,a as ze}from"./index-bcb9222f.js";import{c as ke,b as Fe,a as We}from"./install-909f457b.js";import{k as K,l as P,m as Ye,n as Ue,o as oe,q as be,r as Xe,s as qe,t as He,v as ye,_ as se,Z as Ze,w as V,x as Se,y as Ae,z as je,A as Qe,B as Je,D as Ke,E as et,F as tt,H as at,J as nt,K as rt,L as it,G as ot,M as st,C as lt,N as ct,O as ut,Q as Le,R as xe,T as gt,U as vt,V as ht,S as dt,W as ft,u as mt,i as pt,h as bt,j as we}from"./charts-47f89ec6.js";var Q=Math.PI*2,Me=Math.PI/180;function yt(r,t){return Ue(r.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function St(r,t,e){t.eachSeriesByType(r,function(n){var i=n.getData(),s=i.mapDimension("value"),a=yt(n,e),c=n.get("center"),v=n.get("radius");K(v)||(v=[0,v]),K(c)||(c=[c,c]);var f=P(a.width,e.getWidth()),u=P(a.height,e.getHeight()),y=Math.min(f,u),h=P(c[0],f)+a.x,o=P(c[1],u)+a.y,g=P(v[0],y/2),d=P(v[1],y/2),b=-n.get("startAngle")*Me,p=n.get("minAngle")*Me,l=0;i.each(s,function(x){!isNaN(x)&&l++});var m=i.getSum(s),S=Math.PI/(m||l)*2,A=n.get("clockwise"),L=n.get("roseType"),_=n.get("stillShowZeroSum"),w=i.getDataExtent(s);w[0]=0;var M=Q,F=0,T=b,C=A?1:-1;if(i.setLayout({viewRect:a,r:d}),i.each(s,function(x,N){var D;if(isNaN(x)){i.setItemLayout(N,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:A,cx:h,cy:o,r0:g,r:L?NaN:d});return}L!=="area"?D=m===0&&_?S:x*S:D=Q/l,D<p?(D=p,M-=p):F+=x;var O=T+C*D;i.setItemLayout(N,{angle:D,startAngle:T,endAngle:O,clockwise:A,cx:h,cy:o,r0:g,r:L?Ye(x,w,[g,d]):d}),T=O}),M<Q&&l)if(M<=.001){var E=Q/l;i.each(s,function(x,N){if(!isNaN(x)){var D=i.getItemLayout(N);D.angle=E,D.startAngle=b+C*N*E,D.endAngle=b+C*(N+1)*E}})}else S=M/F,T=b,i.each(s,function(x,N){if(!isNaN(x)){var D=i.getItemLayout(N),O=D.angle===p?p:x*S;D.startAngle=T,D.endAngle=T+C*O,T+=C*O}})})}function At(r){return{seriesType:r,reset:function(t,e){var n=e.findComponents({mainType:"legend"});if(!(!n||!n.length)){var i=t.getData();i.filterSelf(function(s){for(var a=i.getName(s),c=0;c<n.length;c++)if(!n[c].isSelected(a))return!1;return!0})}}}}var Lt=Math.PI/180;function De(r,t,e,n,i,s,a,c,v,f){if(r.length<2)return;function u(d){for(var b=d.rB,p=b*b,l=0;l<d.list.length;l++){var m=d.list[l],S=Math.abs(m.label.y-e),A=n+m.len,L=A*A,_=Math.sqrt((1-Math.abs(S*S/p))*L);m.label.x=t+(_+m.len2)*i}}function y(d){for(var b={list:[],maxY:0},p={list:[],maxY:0},l=0;l<d.length;l++)if(d[l].labelAlignTo==="none"){var m=d[l],S=m.label.y>e?p:b,A=Math.abs(m.label.y-e);if(A>S.maxY){var L=m.label.x-t-m.len2*i,_=n+m.len,w=Math.abs(L)<_?Math.sqrt(A*A/(1-L*L/_/_)):_;S.rB=w,S.maxY=A}S.list.push(m)}u(b),u(p)}for(var h=r.length,o=0;o<h;o++)if(r[o].position==="outer"&&r[o].labelAlignTo==="labelLine"){var g=r[o].label.x-f;r[o].linePoints[1][0]+=g,r[o].label.x=f}He(r,v,v+a)&&y(r)}function wt(r,t,e,n,i,s,a,c){for(var v=[],f=[],u=Number.MAX_VALUE,y=-Number.MAX_VALUE,h=0;h<r.length;h++){var o=r[h].label;_e(r[h])||(o.x<t?(u=Math.min(u,o.x),v.push(r[h])):(y=Math.max(y,o.x),f.push(r[h])))}De(f,t,e,n,1,i,s,a,c,y),De(v,t,e,n,-1,i,s,a,c,u);for(var h=0;h<r.length;h++){var g=r[h],o=g.label;if(!_e(g)){var d=g.linePoints;if(d){var b=g.labelAlignTo==="edge",p=g.rect.width,l=void 0;b?o.x<t?l=d[2][0]-g.labelDistance-a-g.edgeDistance:l=a+i-g.edgeDistance-d[2][0]-g.labelDistance:o.x<t?l=o.x-a-g.bleedMargin:l=a+i-o.x-g.bleedMargin,l<g.rect.width&&(g.label.style.width=l,g.labelAlignTo==="edge"&&(p=l));var m=d[1][0]-d[2][0];b?o.x<t?d[2][0]=a+g.edgeDistance+p+g.labelDistance:d[2][0]=a+i-g.edgeDistance-p-g.labelDistance:(o.x<t?d[2][0]=o.x+g.labelDistance:d[2][0]=o.x-g.labelDistance,d[1][0]=d[2][0]+m),d[1][1]=d[2][1]=o.y}}}}function _e(r){return r.position==="center"}function Mt(r){var t=r.getData(),e=[],n,i,s=!1,a=(r.get("minShowLabelAngle")||0)*Lt,c=t.getLayout("viewRect"),v=t.getLayout("r"),f=c.width,u=c.x,y=c.y,h=c.height;function o(L){L.ignore=!0}function g(L){if(!L.ignore)return!0;for(var _ in L.states)if(L.states[_].ignore===!1)return!0;return!1}t.each(function(L){var _=t.getItemGraphicEl(L),w=_.shape,M=_.getTextContent(),F=_.getTextGuideLine(),T=t.getItemModel(L),C=T.getModel("label"),E=C.get("position")||T.get(["emphasis","label","position"]),x=C.get("distanceToLabelLine"),N=C.get("alignTo"),D=P(C.get("edgeDistance"),f),O=C.get("bleedMargin"),W=T.getModel("labelLine"),B=W.get("length");B=P(B,f);var Y=W.get("length2");if(Y=P(Y,f),Math.abs(w.endAngle-w.startAngle)<a){oe(M.states,o),M.ignore=!0;return}if(g(M)){var U=(w.startAngle+w.endAngle)/2,I=Math.cos(U),G=Math.sin(U),z,X,le,q;n=w.cx,i=w.cy;var $=E==="inside"||E==="inner";if(E==="center")z=w.cx,X=w.cy,q="center";else{var ee=($?(w.r+w.r0)/2*I:w.r*I)+n,te=($?(w.r+w.r0)/2*G:w.r*G)+i;if(z=ee+I*3,X=te+G*3,!$){var ce=ee+I*(B+v-w.r),ue=te+G*(B+v-w.r),ge=ce+(I<0?-1:1)*Y,ve=ue;N==="edge"?z=I<0?u+D:u+f-D:z=ge+(I<0?-x:x),X=ve,le=[[ee,te],[ce,ue],[ge,ve]]}q=$?"center":N==="edge"?I>0?"right":"left":I>0?"left":"right"}var H,ae=C.get("rotate");if(typeof ae=="number"?H=ae*(Math.PI/180):H=ae?I<0?-U+Math.PI:-U:0,s=!!H,M.x=z,M.y=X,M.rotation=H,M.setStyle({verticalAlign:"middle"}),$){M.setStyle({align:q});var ne=M.states.select;ne&&(ne.x+=M.x,ne.y+=M.y)}else{var Z=M.getBoundingRect().clone();Z.applyTransform(M.getComputedTransform());var he=(M.style.margin||0)+2.1;Z.y-=he/2,Z.height+=he,e.push({label:M,labelLine:F,position:E,len:B,len2:Y,minTurnAngle:W.get("minTurnAngle"),maxSurfaceAngle:W.get("maxSurfaceAngle"),surfaceNormal:new be(I,G),linePoints:le,textAlign:q,labelDistance:x,labelAlignTo:N,edgeDistance:D,bleedMargin:O,rect:Z})}_.setTextConfig({inside:$})}}),!s&&r.get("avoidLabelOverlap")&&wt(e,n,i,v,f,h,u,y);for(var d=0;d<e.length;d++){var b=e[d],p=b.label,l=b.labelLine,m=isNaN(p.x)||isNaN(p.y);if(p){p.setStyle({align:b.textAlign}),m&&(oe(p.states,o),p.ignore=!0);var S=p.states.select;S&&(S.x+=p.x,S.y+=p.y)}if(l){var A=b.linePoints;m||!A?(oe(l.states,o),l.ignore=!0):(Xe(A,b.minTurnAngle),qe(A,b.surfaceNormal,b.maxSurfaceAngle),l.setShape({points:A}),p.__hostTarget.textGuideLineConfig={anchor:new be(A[0][0],A[0][1])})}}}function J(r,t){var e=r.get("borderRadius");return e==null?null:(K(e)||(e=[e,e]),{innerCornerRadius:ye(e[0],t.r0),cornerRadius:ye(e[1],t.r)})}var Dt=function(r){se(t,r);function t(e,n,i){var s=r.call(this)||this;s.z2=2;var a=new Ze;return s.setTextContent(a),s.updateData(e,n,i,!0),s}return t.prototype.updateData=function(e,n,i,s){var a=this,c=e.hostModel,v=e.getItemModel(n),f=v.getModel("emphasis"),u=e.getItemLayout(n),y=V(J(v.getModel("itemStyle"),u)||{},u);if(isNaN(y.startAngle)){a.setShape(y);return}if(s){a.setShape(y);var h=c.getShallow("animationType");h==="scale"?(a.shape.r=u.r0,Se(a,{shape:{r:u.r}},c,n)):i!=null?(a.setShape({startAngle:i,endAngle:i}),Se(a,{shape:{startAngle:u.startAngle,endAngle:u.endAngle}},c,n)):(a.shape.endAngle=u.startAngle,Ae(a,{shape:{endAngle:u.endAngle}},c,n))}else Ae(a,{shape:y},c,n);a.useStyle(e.getItemVisual(n,"style")),je(a,v);var o=(u.startAngle+u.endAngle)/2,g=c.get("selectedOffset"),d=Math.cos(o)*g,b=Math.sin(o)*g,p=v.getShallow("cursor");p&&a.attr("cursor",p),this._updateLabel(c,e,n),a.ensureState("emphasis").shape=Qe({r:u.r+(f.get("scale")&&f.get("scaleSize")||0)},J(f.getModel("itemStyle"),u)),V(a.ensureState("select"),{x:d,y:b,shape:J(v.getModel(["select","itemStyle"]),u)}),V(a.ensureState("blur"),{shape:J(v.getModel(["blur","itemStyle"]),u)});var l=a.getTextGuideLine(),m=a.getTextContent();l&&V(l.ensureState("select"),{x:d,y:b}),V(m.ensureState("select"),{x:d,y:b}),Je(this,f.get("focus"),f.get("blurScope"))},t.prototype._updateLabel=function(e,n,i){var s=this,a=n.getItemModel(i),c=a.getModel("labelLine"),v=n.getItemVisual(i,"style"),f=v&&v.fill,u=v&&v.opacity;Ke(s,et(a),{labelFetcher:n.hostModel,labelDataIndex:i,inheritColor:f,defaultOpacity:u,defaultText:e.getFormattedLabel(i,"normal")||n.getName(i)});var y=s.getTextContent();s.setTextConfig({position:null,rotation:null}),y.attr({z2:10});var h=e.get(["label","position"]);if(h!=="outside"&&h!=="outer")s.removeTextGuideLine();else{var o=this.getTextGuideLine();o||(o=new tt,this.setTextGuideLine(o)),at(this,rt(a),{stroke:f,opacity:nt(c.get(["lineStyle","opacity"]),u,1)})}},t}(it),_t=function(r){se(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.ignoreLabelLineUpdate=!0,e}return t.prototype.init=function(){var e=new ot;this._sectorGroup=e},t.prototype.render=function(e,n,i,s){var a=e.getData(),c=this._data,v=this.group,f;if(!c&&a.count()>0){for(var u=a.getItemLayout(0),y=1;isNaN(u&&u.startAngle)&&y<a.count();++y)u=a.getItemLayout(y);u&&(f=u.startAngle)}a.diff(c).add(function(h){var o=new Dt(a,h,f);a.setItemGraphicEl(h,o),v.add(o)}).update(function(h,o){var g=c.getItemGraphicEl(o);g.updateData(a,h,f),g.off("click"),v.add(g),a.setItemGraphicEl(h,g)}).remove(function(h){var o=c.getItemGraphicEl(h);st(o,e,h)}).execute(),Mt(e),e.get("animationTypeUpdate")!=="expansion"&&(this._data=a)},t.prototype.dispose=function(){},t.prototype.containPoint=function(e,n){var i=n.getData(),s=i.getItemLayout(0);if(s){var a=e[0]-s.cx,c=e[1]-s.cy,v=Math.sqrt(a*a+c*c);return v<=s.r&&v>=s.r0}},t.type="pie",t}(lt);const xt=_t;function Ct(r,t,e){t=K(t)&&{coordDimensions:t}||V({},t);var n=r.getSource(),i=ct(n,t),s=new ut(i,r);return s.initData(n,e),s}var Nt=function(){function r(t,e){this._getDataWithEncodedVisual=t,this._getRawData=e}return r.prototype.getAllNames=function(){var t=this._getRawData();return t.mapArray(t.getName)},r.prototype.containName=function(t){var e=this._getRawData();return e.indexOfName(t)>=0},r.prototype.indexOfName=function(t){var e=this._getDataWithEncodedVisual();return e.indexOfName(t)},r.prototype.getItemVisual=function(t,e){var n=this._getDataWithEncodedVisual();return n.getItemVisual(t,e)},r}();const Tt=Nt;var It=function(r){se(t,r);function t(){var e=r!==null&&r.apply(this,arguments)||this;return e.useColorPaletteOnData=!0,e}return t.prototype.init=function(e){r.prototype.init.apply(this,arguments),this.legendVisualProvider=new Tt(Le(this.getData,this),Le(this.getRawData,this)),this._defaultLabelLine(e)},t.prototype.mergeOption=function(){r.prototype.mergeOption.apply(this,arguments)},t.prototype.getInitialData=function(){return Ct(this,{coordDimensions:["value"],encodeDefaulter:xe(gt,this)})},t.prototype.getDataParams=function(e){var n=this.getData(),i=r.prototype.getDataParams.call(this,e),s=[];return n.each(n.mapDimension("value"),function(a){s.push(a)}),i.percent=vt(s,e,n.hostModel.get("percentPrecision")),i.$vars.push("percent"),i},t.prototype._defaultLabelLine=function(e){ht(e,"labelLine",["show"]);var n=e.labelLine,i=e.emphasis.labelLine;n.show=n.show&&e.label.show,i.show=i.show&&e.emphasis.label.show},t.type="series.pie",t.defaultOption={zlevel:0,z:2,legendHoverLink:!0,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},t}(dt);const Pt=It;function Et(r){r.registerChartView(xt),r.registerSeriesModel(Pt),ft("pie",r.registerAction),r.registerLayout(xe(St,"pie")),r.registerProcessor(At("pie"))}const Ot={class:"dashboard-chart-title-container"},$t=Ce({__name:"MiddleChart",setup(r){mt([ke,Fe,Et,We,pt,bt]);const t=l=>{let m;if(!l||l.length===0)return m=new Date,`${m.getFullYear()}-${m.getMonth()+1}`;m=new Date(l[0]);const S=new Date(l[1]),A=m.getMonth()+1>9?m.getMonth()+1:`0${m.getMonth()+1}`,L=S.getMonth()+1>9?S.getMonth()+1:`0${S.getMonth()+1}`;return`${m.getFullYear()}-${A}  至  ${S.getFullYear()}-${L}`},e=Ne(),n=de(1),i=Te(()=>e.chartColors);let s,a;const c=()=>{s||(s=document.getElementById("monitorContainer")),a=we(s),a.setOption(pe({...i.value}))};let v,f;const u=()=>{v||(v=document.getElementById("countContainer")),f=we(v),f.setOption(ze(i.value))},y=()=>{c(),u()},h=()=>{document.documentElement.clientWidth>=1400&&document.documentElement.clientWidth<1920?n.value=Number((document.documentElement.clientWidth/2080).toFixed(2)):document.documentElement.clientWidth<1080?n.value=Number((document.documentElement.clientWidth/1080).toFixed(2)):n.value=1,a.resize({width:s.clientWidth,height:n.value*326}),f.resize({width:n.value*326,height:n.value*326})};Ie(()=>{y(),fe(()=>{h()}),window.addEventListener("resize",h,!1)}),Pe(()=>{window.removeEventListener("resize",h)}),Ee(()=>{b(),g(),d()});const o=de(t()),g=re(()=>e.brandTheme,()=>{Ve([a,f])}),d=re(()=>e.isSidebarCompact,()=>{e.isSidebarCompact?fe(()=>{h()}):setTimeout(()=>{h()},180)}),b=re(()=>e.mode,()=>{[a,f].forEach(l=>{l.dispose()}),y()}),p=l=>{o.value=t(l),a.setOption(pe({dateTime:l,...i.value}))};return(l,m)=>{const S=j("t-date-range-picker"),A=j("t-card"),L=j("t-col"),_=j("t-row");return Oe(),$e(_,{gutter:16,class:"row-container"},{default:R(()=>[k(L,{xs:12,xl:9},{default:R(()=>[k(A,{title:"统计数据",subtitle:`(万元)${o.value}`,class:"dashboard-chart-card",bordered:!1},{actions:R(()=>[ie("div",Ot,[k(S,{class:"card-date-picker-container",theme:"primary",mode:"date","default-value":Re(Ge),onChange:p},null,8,["default-value"])])]),default:R(()=>[ie("div",{id:"monitorContainer",class:"dashboard-chart-container",style:me({width:"100%",height:`${n.value*326}px`})},null,4)]),_:1},8,["subtitle"])]),_:1}),k(L,{xs:12,xl:3},{default:R(()=>[k(A,{title:"销售渠道",subtitle:o.value,class:"dashboard-chart-card",bordered:!1},{default:R(()=>[ie("div",{id:"countContainer",style:me({width:`${n.value*326}px`,height:`${n.value*326}px`,margin:"0 auto"}),class:"dashboard-chart-container"},null,4)]),_:1},8,["subtitle"])]),_:1})]),_:1})}}});const kt=Be($t,[["__scopeId","data-v-6a1c3efd"]]);export{kt as default};
