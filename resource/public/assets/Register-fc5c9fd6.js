import{k as q,r as p,d as $,m as i,o as g,e as y,q as a,a as o,M as w,v as h,x as c,z as b,b as k,s as A,N as I,p as B,f as M,g as L}from"./index-fd6a2e45.js";const P=(r=60)=>{let d;q(()=>{clearInterval(d)});const s=p(0);return[s,()=>{s.value=r,d=setInterval(()=>{s.value>0?s.value-=1:(clearInterval(d),s.value=0)},1e3)}]},D=r=>(B("data-v-4e80e612"),r=r(),M(),r),E=D(()=>k("span",null,"TDesign服务协议",-1)),F=D(()=>k("span",null,"TDesign 隐私声明",-1)),O={class:"switch-container"},j=$({__name:"Register",emits:["registerSuccess"],setup(r,{emit:d}){const s={phone:"",email:"",password:"",verifyCode:"",checked:!1},T={phone:[{required:!0,message:"手机号必填",type:"error"}],email:[{required:!0,message:"邮箱必填",type:"error"},{email:!0,message:"请输入正确的邮箱",type:"warning"}],password:[{required:!0,message:"密码必填",type:"error"}],verifyCode:[{required:!0,message:"验证码必填",type:"error"}]},n=p("phone"),x=p(),t=p({...s}),m=p(!1),[V,S]=P(),z=v=>{if(v.validateResult===!0){if(!t.value.checked){I.error("请同意TDesign服务协议和TDesign 隐私声明");return}I.success("注册成功"),d("registerSuccess")}},U=v=>{x.value.reset(),n.value=v};return(v,e)=>{const _=i("t-icon"),f=i("t-input"),u=i("t-form-item"),C=i("t-button"),N=i("t-checkbox"),R=i("t-form");return g(),y(R,{ref_key:"form",ref:x,class:A(["item-container",`register-${n.value}`]),data:t.value,rules:T,"label-width":"0",onSubmit:z},{default:a(()=>[n.value=="phone"?(g(),y(u,{key:0,name:"phone"},{default:a(()=>[o(f,{modelValue:t.value.phone,"onUpdate:modelValue":e[0]||(e[0]=l=>t.value.phone=l),maxlength:11,size:"large",placeholder:"请输入您的手机号"},{"prefix-icon":a(()=>[o(_,{name:"user"})]),_:1},8,["modelValue"])]),_:1})):w("",!0),n.value=="email"?(g(),y(u,{key:1,name:"email"},{default:a(()=>[o(f,{modelValue:t.value.email,"onUpdate:modelValue":e[1]||(e[1]=l=>t.value.email=l),type:"text",size:"large",placeholder:"请输入您的邮箱"},{"prefix-icon":a(()=>[o(_,{name:"mail"})]),_:1},8,["modelValue"])]),_:1})):w("",!0),o(u,{name:"password"},{default:a(()=>[o(f,{modelValue:t.value.password,"onUpdate:modelValue":e[3]||(e[3]=l=>t.value.password=l),size:"large",type:m.value?"text":"password",clearable:"",placeholder:"请输入登录密码"},{"prefix-icon":a(()=>[o(_,{name:"lock-on"})]),"suffix-icon":a(()=>[o(_,{name:m.value?"browse":"browse-off",onClick:e[2]||(e[2]=l=>m.value=!m.value)},null,8,["name"])]),_:1},8,["modelValue","type"])]),_:1}),n.value=="phone"?(g(),y(u,{key:2,class:"verification-code",name:"verifyCode"},{default:a(()=>[o(f,{modelValue:t.value.verifyCode,"onUpdate:modelValue":e[4]||(e[4]=l=>t.value.verifyCode=l),size:"large",placeholder:"请输入验证码"},null,8,["modelValue"]),o(C,{variant:"outline",disabled:h(V)>0,onClick:h(S)},{default:a(()=>[c(b(h(V)==0?"发送验证码":`${h(V)}秒后可重发`),1)]),_:1},8,["disabled","onClick"])]),_:1})):w("",!0),o(u,{class:"check-container",name:"checked"},{default:a(()=>[o(N,{modelValue:t.value.checked,"onUpdate:modelValue":e[5]||(e[5]=l=>t.value.checked=l)},{default:a(()=>[c("我已阅读并同意 ")]),_:1},8,["modelValue"]),c(),E,c(" 和 "),F]),_:1}),o(u,null,{default:a(()=>[o(C,{block:"",size:"large",type:"submit"},{default:a(()=>[c(" 注册 ")]),_:1})]),_:1}),k("div",O,[k("span",{class:"tip",onClick:e[6]||(e[6]=l=>U(n.value=="phone"?"email":"phone"))},b(n.value=="phone"?"使用邮箱注册":"使用手机号注册"),1)])]),_:1},8,["class","data"])}}});const H=L(j,[["__scopeId","data-v-4e80e612"]]);export{H as default};
