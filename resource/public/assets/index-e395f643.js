import{P as K}from"./index-dd52357c.js";import{T as Q}from"./index-f078d9f9.js";import{h as F,d as tt,u as et,i as P,j as at,n as rt,k as nt,l as it,w as N,m as g,o as _,c as D,a as u,q as h,s as k,F as M,t as V,v as w,x as B,y as ot,e as O,b as v,z as st,p as lt,f as ct,g as dt}from"./index-9f7c584d.js";import{L as W}from"./date-c2fcd23c.js";import{_ as C,c as pt,S as ut,P as ht,G as mt,I as ft,a as yt,g as gt,p as j,b as _t,C as vt,u as G,d as $,e as s,f as St,i as bt,h as wt,j as H}from"./charts-a1fd51a8.js";import{i as xt,a as Dt,b as Lt,c as Ct}from"./install-9f776693.js";import"./shop-bac829ca.js";import"./service-fc49deca.js";import"./user-avatar-17bcaa0e.js";import"./laptop-c893072f.js";import"./more-b9f53761.js";var Tt=function(n){C(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t.hasSymbolVisual=!0,t}return e.prototype.getInitialData=function(t,r){return pt(this.getSource(),this,{useEncodeDefaulter:!0})},e.prototype.getProgressive=function(){var t=this.option.progressive;return t??(this.option.large?5e3:this.get("progressive"))},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return t??(this.option.large?1e4:this.get("progressiveThreshold"))},e.prototype.brushSelector=function(t,r,a){return a.point(r.getItemLayout(t))},e.type="series.scatter",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}}},e}(ut);const It=Tt;var Y=4,zt=function(){function n(){}return n}(),L=function(n){C(e,n);function e(t){return n.call(this,t)||this}return e.prototype.getDefaultShape=function(){return new zt},e.prototype.buildPath=function(t,r){var a=r.points,i=r.size,o=this.symbolProxy,l=o.shape,c=t.getContext?t.getContext():t,d=c&&i[0]<Y;if(d){this._ctx=c;return}this._ctx=null;for(var p=0;p<a.length;){var m=a[p++],f=a[p++];isNaN(m)||isNaN(f)||this.softClipShape&&!this.softClipShape.contain(m,f)||(l.x=m-i[0]/2,l.y=f-i[1]/2,l.width=i[0],l.height=i[1],o.buildPath(t,l,!0))}},e.prototype.afterBrush=function(){var t=this.shape,r=t.points,a=t.size,i=this._ctx;if(i)for(var o=0;o<r.length;){var l=r[o++],c=r[o++];isNaN(l)||isNaN(c)||this.softClipShape&&!this.softClipShape.contain(l,c)||i.fillRect(l-a[0]/2,c-a[1]/2,a[0],a[1])}},e.prototype.findDataIndex=function(t,r){for(var a=this.shape,i=a.points,o=a.size,l=Math.max(o[0],4),c=Math.max(o[1],4),d=i.length/2-1;d>=0;d--){var p=d*2,m=i[p]-l/2,f=i[p+1]-c/2;if(t>=m&&r>=f&&t<=m+l&&r<=f+c)return d}return-1},e}(ht),At=function(){function n(){this.group=new mt}return n.prototype.isPersistent=function(){return!this._incremental},n.prototype.updateData=function(e,t){this.group.removeAll();var r=new L({rectHover:!0,cursor:"default"});r.setShape({points:e.getLayout("points")}),this._setCommon(r,e,!1,t),this.group.add(r),this._incremental=null},n.prototype.updateLayout=function(e){if(!this._incremental){var t=e.getLayout("points");this.group.eachChild(function(r){if(r.startIndex!=null){var a=(r.endIndex-r.startIndex)*2,i=r.startIndex*4*2;t=new Float32Array(t.buffer,i,a)}r.setShape("points",t)})}},n.prototype.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clearIncremental(),e.count()>2e6?(this._incremental||(this._incremental=new ft({silent:!0})),this.group.add(this._incremental)):this._incremental=null},n.prototype.incrementalUpdate=function(e,t,r){var a;this._incremental?(a=new L,this._incremental.addDisplayable(a,!0)):(a=new L({rectHover:!0,cursor:"default",startIndex:e.start,endIndex:e.end}),a.incremental=!0,this.group.add(a)),a.setShape({points:t.getLayout("points")}),this._setCommon(a,t,!!this._incremental,r)},n.prototype._setCommon=function(e,t,r,a){var i=t.hostModel;a=a||{};var o=t.getVisual("symbolSize");e.setShape("size",o instanceof Array?o:[o,o]),e.softClipShape=a.clipShape||null,e.symbolProxy=yt(t.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor;var l=e.shape.size[0]<Y;e.useStyle(i.getModel("itemStyle").getItemStyle(l?["color","shadowBlur","shadowColor"]:["color"]));var c=t.getVisual("style"),d=c&&c.fill;if(d&&e.setColor(d),!r){var p=gt(e);p.seriesIndex=i.seriesIndex,e.on("mousemove",function(m){p.dataIndex=null;var f=e.findDataIndex(m.offsetX,m.offsetY);f>=0&&(p.dataIndex=f+(e.startIndex||0))})}},n.prototype.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},n.prototype._clearIncremental=function(){var e=this._incremental;e&&e.clearDisplaybles()},n}();const Pt=At;var Nt=function(n){C(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.type=e.type,t}return e.prototype.render=function(t,r,a){var i=t.getData(),o=this._updateSymbolDraw(i,t);o.updateData(i,{clipShape:this._getClipShape(t)}),this._finished=!0},e.prototype.incrementalPrepareRender=function(t,r,a){var i=t.getData(),o=this._updateSymbolDraw(i,t);o.incrementalPrepareUpdate(i),this._finished=!1},e.prototype.incrementalRender=function(t,r,a){this._symbolDraw.incrementalUpdate(t,r.getData(),{clipShape:this._getClipShape(r)}),this._finished=t.end===r.getData().count()},e.prototype.updateTransform=function(t,r,a){var i=t.getData();if(this.group.dirty(),!this._finished||i.count()>1e4||!this._symbolDraw.isPersistent())return{update:!0};var o=j("").reset(t,r,a);o.progress&&o.progress({start:0,end:i.count(),count:i.count()},i),this._symbolDraw.updateLayout(i)},e.prototype._getClipShape=function(t){var r=t.coordinateSystem,a=r&&r.getArea&&r.getArea();return t.get("clip",!0)?a:null},e.prototype._updateSymbolDraw=function(t,r){var a=this._symbolDraw,i=r.pipelineContext,o=i.large;return(!a||o!==this._isLargeDraw)&&(a&&a.remove(),a=this._symbolDraw=o?new Pt:new _t,this._isLargeDraw=o,this.group.removeAll()),this.group.add(a.group),a},e.prototype.remove=function(t,r){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},e.prototype.dispose=function(){},e.type="scatter",e}(vt);const kt=Nt;function Mt(n){G(xt),n.registerSeriesModel(It),n.registerChartView(kt),n.registerLayout(j("scatter"))}const Vt=[{title:"总申请数（次）",number:"1126",upTrend:"10%"},{title:"供应商数量（个）",number:"13",downTrend:"13%"},{title:"采购商品品类（类）",number:"4",upTrend:"10%"},{title:"申请人数量（人）",number:90,downTrend:"44%",leftType:"icon-file-paste"},{title:"申请完成率（%）",number:80.5,upTrend:"70%"},{title:"到货及时率（%）",number:78,upTrend:"16%"}],Bt=[{description:"SSL证书又叫服务器证书，腾讯云为您提供证书的一站式服务，包括免费、付费证书的申请、管理及部",index:1,isSetup:!0,name:"SSL证书",type:4},{description:"SSL证书又叫服务器证书，腾讯云为您提供证书的一站式服务，包括免费、付费证书的申请、管理及部",index:1,isSetup:!0,name:"SSL证书",type:4}];function R({dateTime:n=[],placeholderColor:e,borderColor:t}){const a=[],i=[],o=[];for(let l=0;l<40;l++){if(n.length>0){const c=(new Date(n[1]).getTime()-new Date(n[0]).getTime())/40,d=new Date(n[0]).getTime()+c*l;a.push($(d).format("MM-DD"))}else a.push($().subtract(40-l,"day").format("MM-DD"));i.push(s().toString()),o.push(s().toString())}return{color:F(),xAxis:{data:a,axisLabel:{color:e},splitLine:{show:!1},axisLine:{lineStyle:{color:t,width:1}}},yAxis:{type:"value",axisLabel:{color:e},nameTextStyle:{padding:[0,0,0,60]},axisTick:{show:!1,axisLine:{show:!1}},axisLine:{show:!1},splitLine:{lineStyle:{color:t}}},tooltip:{trigger:"item"},grid:{top:"5px",left:"25px",right:"5px",bottom:"60px"},legend:{left:"center",bottom:"0",orient:"horizontal",data:["按摩仪","咖啡机"],itemHeight:8,itemWidth:8,textStyle:{fontSize:12,color:e}},series:[{name:"按摩仪",symbolSize:10,data:o.reverse(),type:"scatter"},{name:"咖啡机",symbolSize:10,data:i.concat(i.reverse()),type:"scatter"}]}}function U({dateTime:n=[],placeholderColor:e,borderColor:t}){let r=["周一","周二","周三","周四","周五","周六","周日"];return n.length>0&&(r=St(n,7)),{color:F(),grid:{top:"5%",right:"10px",left:"30px",bottom:"60px"},legend:{left:"center",bottom:"0",orient:"horizontal",data:["杯子","茶叶","蜂蜜","面粉"],textStyle:{fontSize:12,color:e}},xAxis:{type:"category",data:r,boundaryGap:!1,axisLabel:{color:e},axisLine:{lineStyle:{color:t,width:1}}},yAxis:{type:"value",axisLabel:{color:e},splitLine:{lineStyle:{color:t}}},tooltip:{trigger:"item"},series:[{showSymbol:!0,symbol:"circle",symbolSize:8,name:"杯子",stack:"总量",data:[s(),s(),s(),s(),s(),s(),s()],type:"line",itemStyle:{borderColor:t,borderWidth:1}},{showSymbol:!0,symbol:"circle",symbolSize:8,name:"茶叶",stack:"总量",data:[s(),s(),s(),s(),s(),s(),s()],type:"line",itemStyle:{borderColor:t,borderWidth:1}},{showSymbol:!0,symbol:"circle",symbolSize:8,name:"蜂蜜",stack:"总量",data:[s(),s(),s(),s(),s(),s(),s()],type:"line",itemStyle:{borderColor:t,borderWidth:1}},{showSymbol:!0,symbol:"circle",symbolSize:8,name:"面粉",stack:"总量",data:[s(),s(),s(),s(),s(),s(),s()],type:"line",itemStyle:{borderColor:t,borderWidth:1}}]}}const q=n=>(lt("data-v-f4eb7e97"),n=n(),ct(),n),Ot={class:"dashboard-panel-detail"},Wt={class:"dashboard-list-card__number"},$t={class:"dashboard-list-card__text"},Ht={class:"dashboard-list-card__text-left"},Rt=q(()=>v("div",{id:"lineContainer",style:{width:"100%",height:"416px"}},null,-1)),Ut=q(()=>v("div",{id:"scatterContainer",style:{width:"100%",height:"434px"}},null,-1)),Ft={name:"DashboardDetail"},jt=tt({...Ft,setup(n){G([Dt,Lt,Ct,bt,Mt,wt]);const e=et(),t=P(()=>e.chartColors);let r,a;const i=()=>{r=document.getElementById("lineContainer"),a=H(r),a.setOption(U({...t.value}))};let o,l;const c=()=>{o=document.getElementById("scatterContainer"),l=H(o),l.setOption(R({...t.value}))},d=()=>{a==null||a.resize({width:r.clientWidth,height:r.clientHeight}),l==null||l.resize({width:o.clientWidth,height:o.clientHeight})},p=()=>{c(),i()};at(()=>{p(),window.addEventListener("resize",d,!1),rt(()=>{d()})}),nt(()=>{window.removeEventListener("resize",d)}),it(()=>{m(),f()});const m=N(()=>e.mode,()=>{p()}),f=N(()=>e.brandTheme,()=>{ot([a,l])}),E=()=>{l.setOption(R({...t.value}))},X=T=>{const I=P(()=>e.chartColors);a.setOption(U({dateTime:T,...I.value}))};return(T,I)=>{const Z=g("t-icon"),S=g("t-card"),x=g("t-col"),z=g("t-row"),A=g("t-date-range-picker"),J=g("t-button");return _(),D("div",Ot,[u(S,{title:"本月采购申请情况",class:"dashboard-detail-card",bordered:!1},{default:h(()=>[u(z,{gutter:[16,16]},{default:h(()=>[(_(!0),D(M,null,V(w(Vt),(y,b)=>(_(),O(x,{key:b,xs:6,xl:3},{default:h(()=>[u(S,{class:"dashboard-list-card",description:y.title},{default:h(()=>[v("div",Wt,st(y.number),1),v("div",$t,[v("div",Ht,[B(" 环比 "),u(Q,{class:"icon",type:y.upTrend?"up":"down",describe:y.upTrend||y.downTrend},null,8,["type","describe"])]),u(Z,{name:"chevron-right"})])]),_:2},1032,["description"])]),_:2},1024))),128))]),_:1})]),_:1}),u(z,{gutter:[16,16],class:"row-margin"},{default:h(()=>[u(x,{xs:12,xl:9},{default:h(()=>[u(S,{class:"dashboard-detail-card",title:"采购商品申请趋势",subtitle:"(件)",bordered:!1},{actions:h(()=>[u(A,{class:"card-date-picker-container","default-value":w(W),theme:"primary",mode:"date",style:{width:"248px"},onChange:X},null,8,["default-value"])]),default:h(()=>[Rt]),_:1})]),_:1}),u(x,{xs:12,xl:3},{default:h(()=>[(_(!0),D(M,null,V(w(Bt),(y,b)=>(_(),O(K,{key:b,product:y,class:k({"row-margin":b!==0,"product-card":!0})},null,8,["product","class"]))),128))]),_:1})]),_:1}),u(S,{class:k(["dashboard-detail-card","row-margin"]),title:"采购商品满意度分布",bordered:!1},{actions:h(()=>[u(A,{class:"card-date-picker-container","default-value":w(W),theme:"primary",mode:"date",style:{display:"inline-block","margin-right":"var(--td-comp-margin-s)",width:"248px"},onChange:E},null,8,["default-value"]),u(J,{class:"card-date-button"},{default:h(()=>[B(" 导出数据 ")]),_:1})]),default:h(()=>[Ut]),_:1})])}}});const ae=dt(jt,[["__scopeId","data-v-f4eb7e97"]]);export{ae as default};
