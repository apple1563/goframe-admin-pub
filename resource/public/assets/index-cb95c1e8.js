import{a as T}from"./list-5042c18a.js";import{P as $}from"./index-77f719c0.js";import{_ as F}from"./DialogForm.vue_vue_type_script_setup_true_lang-9da36f00.js";import{d as j,r as n,i as q,j as E,m as s,o as i,c as d,b as v,a as l,q as m,x as G,e as y,v as H,ac as J,M as b,F as z,t as K,N as O,g as Q}from"./index-fd6a2e45.js";import"./shop-2628a00e.js";import"./service-990665bb.js";import"./user-avatar-9661063b.js";import"./laptop-81a5aff4.js";import"./more-713ccd0f.js";const R={class:"list-card-operation"},W={class:"search-input"},X={class:"list-card-items"},Y={class:"list-card-pagination"},Z={key:1,class:"list-card-loading"},ee={name:"ListCard"},te=j({...ee,setup(ae){const x={name:"",status:"",description:"",type:"0",mark:"",amount:0},t=n({current:1,pageSize:12,total:0}),u=n(void 0),p=n([]),_=n(!0),C=async()=>{try{const{list:e}=await T();p.value=e,t.value={...t.value,total:e.length}}catch(e){console.log(e)}finally{_.value=!1}},V=q(()=>u.value?`确认删除后${u.value.name}的所有产品信息将被清空, 且无法恢复`:"");E(()=>{C()});const r=n(!1),g=n(""),c=n(!1),f=n({...x}),k=e=>{t.value.pageSize=e,t.value.current=1},S=e=>{t.value.current=e},h=e=>{c.value=!0,u.value=e},D=()=>{const{index:e}=u.value;p.value.splice(e-1,1),c.value=!1,O.success("删除成功")},P=()=>{u.value=void 0,f.value={...x}},I=e=>{r.value=!0,f.value={name:e.name,status:e!=null&&e.isSetup?"1":"0",description:e.description,type:e.type.toString(),mark:"",amount:0}};return(e,o)=>{const L=s("t-button"),N=s("t-input"),B=s("t-col"),M=s("t-row"),U=s("t-pagination"),w=s("t-loading"),A=s("t-dialog");return i(),d("div",null,[v("div",R,[l(L,{onClick:o[0]||(o[0]=a=>r.value=!0)},{default:m(()=>[G(" 新建产品 ")]),_:1}),v("div",W,[l(N,{modelValue:g.value,"onUpdate:modelValue":o[1]||(o[1]=a=>g.value=a),placeholder:"请输入你需要搜索的内容",clearable:""},{"suffix-icon":m(()=>[g.value===""?(i(),y(H(J),{key:0,size:"var(--td-comp-size-xxxs)"})):b("",!0)]),_:1},8,["modelValue"])])]),l(F,{visible:r.value,"onUpdate:visible":o[2]||(o[2]=a=>r.value=a),data:f.value},null,8,["visible","data"]),t.value.total>0&&!_.value?(i(),d(z,{key:0},[v("div",X,[l(M,{gutter:[16,16]},{default:m(()=>[(i(!0),d(z,null,K(p.value.slice(t.value.pageSize*(t.value.current-1),t.value.pageSize*t.value.current),a=>(i(),y(B,{key:a.index,lg:4,xs:6,xl:3},{default:m(()=>[l($,{class:"list-card-item",product:a,onDeleteItem:h,onManageProduct:I},null,8,["product"])]),_:2},1024))),128))]),_:1})]),v("div",Y,[l(U,{modelValue:t.value.current,"onUpdate:modelValue":o[3]||(o[3]=a=>t.value.current=a),"page-size":t.value.pageSize,"onUpdate:pageSize":o[4]||(o[4]=a=>t.value.pageSize=a),total:t.value.total,"page-size-options":[12,24,36],onPageSizeChange:k,onCurrentChange:S},null,8,["modelValue","page-size","total"])])],64)):_.value?(i(),d("div",Z,[l(w,{size:"large",text:"加载数据中..."})])):b("",!0),l(A,{visible:c.value,"onUpdate:visible":o[5]||(o[5]=a=>c.value=a),header:"确认删除所选产品？",body:V.value,"on-cancel":P,onConfirm:D},null,8,["visible","body"])])}}});const ve=Q(te,[["__scopeId","data-v-92589750"]]);export{ve as default};
