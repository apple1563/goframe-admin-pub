import{d as C,r as c,m as l,o as _,e as w,q as s,x as f,M as v,a as t,as as A,N as b,g as $}from"./index-fd6a2e45.js";const q={name:"MePassWord"},P=C({...q,setup(U){const r=c(!0),a=c({password:"",passwordNew:""}),u=c(null),g={password:[{required:!0}],passwordNew:[{required:!0},{validator:o=>/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/.test(o),message:"长度至少为 8 个字符，至少一个字母、一个数字和一个特殊字符（@, $, !, %, *, ?, &）"}],passwordNewAgain:[{required:!0},{validator:o=>o===a.value.passwordNew,message:"与新密码不一致"}]},N=()=>{u.value.validate({showErrorMessage:!0}).then(async o=>{var e,d;if(o===!0){await A({passwordNew:a.value.passwordNew,password:a.value.password}),b.success("修改成功"),r.value=!0;return}if(o&&Object.keys(o).length){const i=(d=(e=Object.values(o)[0])==null?void 0:e[0])==null?void 0:d.message;b.warning(i)}})},V=()=>{u.value.reset(),u.value.clearValidate(),r.value=!0},y=()=>{};return(o,e)=>{const d=l("t-button"),i=l("t-icon"),p=l("t-input"),m=l("t-form-item"),k=l("t-form"),x=l("t-space"),M=l("t-card");return _(),w(M,{class:"user-info-list",title:"修改密码",bordered:!1},{actions:s(()=>[r.value===!1?(_(),w(d,{key:0,onClick:N},{default:s(()=>[f("保存")]),_:1})):v("",!0),r.value===!1?(_(),w(d,{key:1,onClick:V},{default:s(()=>[f("取消")]),_:1})):v("",!0),t(d,{theme:"default",shape:"square",variant:"text",onClick:e[0]||(e[0]=n=>r.value=!1)},{default:s(()=>[t(i,{name:"filter-2"})]),_:1})]),default:s(()=>[t(x,{direction:"vertical",size:"large",style:{width:"100%","margin-top":"20px"}},{default:s(()=>[t(k,{ref_key:"form",ref:u,data:a.value,rules:g,"scroll-to-first-error":"smooth",layout:"inline",onReset:y},{default:s(()=>[t(m,{label:"原密码",name:"password"},{default:s(()=>[t(p,{modelValue:a.value.password,"onUpdate:modelValue":e[1]||(e[1]=n=>a.value.password=n),modelModifiers:{trim:!0},type:"password",disabled:r.value},null,8,["modelValue","disabled"])]),_:1}),t(m,{label:"新密码",name:"passwordNew",title:"长度至少为 8 个字符，至少一个字母、一个数字和一个特殊字符（@, $, !, %, *, ?, &）"},{default:s(()=>[t(p,{modelValue:a.value.passwordNew,"onUpdate:modelValue":e[2]||(e[2]=n=>a.value.passwordNew=n),modelModifiers:{trim:!0},type:"password",disabled:r.value},null,8,["modelValue","disabled"])]),_:1}),t(m,{label:"确认密码",name:"passwordNewAgain"},{default:s(()=>[t(p,{modelValue:a.value.passwordNewAgain,"onUpdate:modelValue":e[3]||(e[3]=n=>a.value.passwordNewAgain=n),modelModifiers:{trim:!0},type:"password",disabled:r.value},null,8,["modelValue","disabled"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1})}}});const j=$(P,[["__scopeId","data-v-20d956cb"]]);export{j as default};
