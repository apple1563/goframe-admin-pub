import{d as W,r as f,aj as G,u as H,i as k,j as J,a2 as X,m as s,o as g,c as Y,a as o,q as t,v as r,Q as w,x as l,b as Z,e as x,M as R,a$ as ee,N as te,g as oe}from"./index-812ea633.js";import{a as V,C as ne}from"./constants-c605bb85.js";const ae={class:"list-common-table"},se={class:"table-container"},le="index",re="top",ie=!0,ce=W({__name:"CommonTable",setup(ue){const C=f(null),e=G(),S=n=>{e.setCurrentRow(n.row),e.setMenuPermissionVisible(!0)},L=n=>{e.setCurrentRow(n.row),e.setApiPermissionVisible(!0)},A=n=>{e.setCurrentRow(n.row),e.setButtonPermissionVisible(!0)},B=H(),u=f(!1),d=f(-1),T=k(()=>d.value>-1?"删除后，角色关联权限将被清空，且无法恢复":""),h=()=>{d.value=-1},N=async()=>{await ee(d.value),u.value=!1,te.success("删除成功"),h(),e.getRoleList()},$=()=>{h()};J(()=>{e.getRoleList()});const D=n=>{d.value=n.row.id,u.value=!0},E=n=>{C.value.reset(),console.log(n)},v=()=>{e.getRoleList()},M=(n,i)=>{console.log("分页变化",n,i),e.setPagination({...e.pagination,current:n.current,pageSize:n.pageSize}),v()},O=(n,i)=>{console.log("统一Change",n,i)},P=n=>{e.setCurrentRow(n.row),e.setEditVisible(!0)},U=k(()=>({offsetTop:B.isUseTabsRouter?48:0,container:`.${X}-layout`})),I=()=>{e.setAddVisible(!0)};return(n,i)=>{const z=s("t-input"),F=s("t-form-item"),_=s("t-col"),b=s("t-row"),p=s("t-button"),j=s("t-form"),y=s("t-tag"),c=s("t-link"),q=s("t-space"),K=s("t-table"),Q=s("t-dialog");return g(),Y("div",ae,[o(j,{ref_key:"form",ref:C,data:r(e).searchFormData,"label-width":80,colon:"",onReset:E,onSubmit:v},{default:t(()=>[o(b,null,{default:t(()=>[o(_,{span:10},{default:t(()=>[o(b,{gutter:[24,24]},{default:t(()=>[o(_,{span:4},{default:t(()=>[o(F,{label:"角色名称",name:"name"},{default:t(()=>[o(z,{modelValue:r(e).searchFormData.name,"onUpdate:modelValue":i[0]||(i[0]=a=>r(e).searchFormData.name=a),class:"form-item-content",type:"search",placeholder:"请输入角色名称",style:{minWidth:"134px"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),o(_,{span:2,class:"operation-container"},{default:t(()=>[o(p,{theme:"primary",type:"button",style:w({marginLeft:"var(--td-comp-margin-s)"}),onClick:I},{default:t(()=>[l(" 添加 ")]),_:1},8,["style"]),o(p,{theme:"primary",type:"submit",style:w({marginLeft:"var(--td-comp-margin-s)"})},{default:t(()=>[l(" 查询 ")]),_:1},8,["style"]),o(p,{type:"reset",variant:"base",theme:"default"},{default:t(()=>[l(" 重置 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["data"]),Z("div",se,[o(K,{data:r(e).roleList,columns:r(ne),"row-key":le,"vertical-align":re,hover:ie,pagination:r(e).pagination,loading:r(e).dataLoading,"header-affixed-top":U.value,onPageChange:M,onChange:O},{status:t(({row:a})=>[a.status===r(V).DISABLE?(g(),x(y,{key:0,theme:"danger",variant:"light"},{default:t(()=>[l(" 禁用 ")]),_:1})):R("",!0),a.status===r(V).ENABLE?(g(),x(y,{key:1,theme:"success",variant:"light"},{default:t(()=>[l(" 启用 ")]),_:1})):R("",!0)]),op:t(a=>[o(q,null,{default:t(()=>[o(c,{theme:"primary",onClick:m=>S(a)},{default:t(()=>[l("菜单权限")]),_:2},1032,["onClick"]),o(c,{theme:"primary",onClick:m=>A(a)},{default:t(()=>[l("按钮权限")]),_:2},1032,["onClick"]),o(c,{theme:"primary",onClick:m=>L(a)},{default:t(()=>[l("API权限")]),_:2},1032,["onClick"]),o(c,{theme:"primary",onClick:m=>P(a)},{default:t(()=>[l("编辑")]),_:2},1032,["onClick"]),o(c,{theme:"danger",onClick:m=>D(a)},{default:t(()=>[l("删除")]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["data","columns","pagination","loading","header-affixed-top"]),o(Q,{visible:u.value,"onUpdate:visible":i[1]||(i[1]=a=>u.value=a),header:"确认删除当前角色？",body:T.value,"on-cancel":$,onConfirm:N},null,8,["visible","body"])])])}}});const _e=oe(ce,[["__scopeId","data-v-d1312958"]]);export{_e as default};
