import{d as b,r as p,at as k,m as u,o as A,c as w,a as l,q as a,v as c,au as C,N as f}from"./index-812ea633.js";import{R as y}from"./constants-ff30c5f4.js";const j=b({__name:"AddApi",setup(E){const m=p(null),e=p({url:"",method:"",remark:""}),d=k(),i=()=>{d.setAddVisible(!1)},_=()=>{m.value.reset()},v=()=>{m.value.validate({showErrorMessage:!0}).then(async r=>{var o,t;if(r===!0){await C({...e.value,group:e.value.method.split("/").slice(0,3).join("/")}),f.success("添加成功"),d.getApiList(),i();return}if(r&&Object.keys(r).length){const n=(t=(o=Object.values(r)[0])==null?void 0:o[0])==null?void 0:t.message;f.warning(n)}})};return(r,o)=>{const t=u("t-input"),n=u("t-form-item"),g=u("t-form"),V=u("t-space"),h=u("t-dialog");return A(),w("div",null,[l(h,{size:"large",visible:c(d).addVisible,header:"添加API","on-confirm":v,onClose:i},{default:a(()=>[l(V,{direction:"vertical",size:"large",style:{width:"100%"}},{default:a(()=>[l(g,{ref_key:"form",ref:m,data:e.value,rules:c(y),onReset:_},{default:a(()=>[l(n,{label:"url",name:"url"},{default:a(()=>[l(t,{modelValue:e.value.url,"onUpdate:modelValue":o[0]||(o[0]=s=>e.value.url=s),placeholder:"请输入"},null,8,["modelValue"])]),_:1}),l(n,{label:"method",name:"method"},{default:a(()=>[l(t,{modelValue:e.value.method,"onUpdate:modelValue":o[1]||(o[1]=s=>e.value.method=s),placeholder:"请输入"},null,8,["modelValue"])]),_:1}),l(n,{label:"备注",name:"remark"},{default:a(()=>[l(t,{modelValue:e.value.remark,"onUpdate:modelValue":o[2]||(o[2]=s=>e.value.remark=s),placeholder:"请输入"},null,8,["modelValue"])]),_:1})]),_:1},8,["data","rules"])]),_:1})]),_:1},8,["visible"])])}}});export{j as _};
