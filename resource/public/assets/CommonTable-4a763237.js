import{d as q,ay as I,u as K,r as b,i as B,j as Q,a2 as G,m as i,aA as H,o as r,c as J,a,q as t,v as l,aa as d,e as m,Q as w,x as _,b as X,aB as Y,N as Z,g as ee}from"./index-fd6a2e45.js";import{C as te}from"./constants-64d75a77.js";const ae={class:"list-common-table"},oe={class:"table-container"},ne="index",le="top",se=!0,ie=q({__name:"CommonTable",setup(re){const e=I(),D=K();e.setPagination({pageSize:20});const y=b(null),p=b(!1),f=b(-1),S=B(()=>f.value>-1?"删除后，按钮关联权限将被清空，且无法恢复":""),C=()=>{f.value=-1},T=async()=>{await Y(f.value),p.value=!1,Z.success("删除成功"),C(),e.getButtonList()},L=()=>{C()};Q(()=>{e.getButtonList()});const F=o=>{f.value=o.row.id,p.value=!0},U=o=>{y.value.reset(),console.log(o)},x=()=>{e.getButtonList()},N=(o,n)=>{console.log("分页变化",o,n),e.setPagination({...e.pagination,current:o.current,pageSize:o.pageSize}),x()},z=(o,n)=>{console.log("统一Change",o,n)},A=o=>{e.setCurrentRow(o.row),R()},P=B(()=>({offsetTop:D.isUseTabsRouter?48:0,container:`.${G}-layout`})),M=()=>{e.setAddVisible(!0)},R=()=>{e.setEditVisible(!0)};return(o,n)=>{const g=i("t-input"),h=i("t-form-item"),c=i("t-col"),V=i("t-row"),v=i("t-button"),W=i("t-form"),k=i("t-link"),$=i("t-space"),E=i("t-table"),O=i("t-dialog"),u=H("auth-button");return r(),J("div",ae,[a(W,{ref_key:"form",ref:y,data:l(e).searchFormData,"label-width":80,colon:"",onReset:U,onSubmit:x},{default:t(()=>[a(V,null,{default:t(()=>[a(c,{span:10},{default:t(()=>[a(V,{gutter:[24,24]},{default:t(()=>[a(c,{span:4},{default:t(()=>[a(h,{label:"名称",name:"title"},{default:t(()=>[a(g,{modelValue:l(e).searchFormData.title,"onUpdate:modelValue":n[0]||(n[0]=s=>l(e).searchFormData.title=s),class:"form-item-content",type:"search",placeholder:"请输入按钮名称",style:{minWidth:"134px"}},null,8,["modelValue"])]),_:1})]),_:1}),a(c,{span:4},{default:t(()=>[a(h,{label:"标识符",name:"name"},{default:t(()=>[a(g,{modelValue:l(e).searchFormData.name,"onUpdate:modelValue":n[1]||(n[1]=s=>l(e).searchFormData.name=s),class:"form-item-content",type:"search",placeholder:"请输入按钮名称",style:{minWidth:"134px"}},null,8,["modelValue"])]),_:1})]),_:1}),a(c,{span:4},{default:t(()=>[a(h,{label:"所在菜单",name:"menuTitle"},{default:t(()=>[a(g,{modelValue:l(e).searchFormData.menuTitle,"onUpdate:modelValue":n[2]||(n[2]=s=>l(e).searchFormData.menuTitle=s),class:"form-item-content",type:"search",placeholder:"请输入所在菜单名称",style:{minWidth:"134px"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}),a(c,{span:2,class:"operation-container"},{default:t(()=>[d((r(),m(v,{theme:"primary",type:"button",style:w({marginLeft:"var(--td-comp-margin-s)"}),onClick:M},{default:t(()=>[_(" 添加 ")]),_:1},8,["style"])),[[u,4]]),d((r(),m(v,{theme:"primary",type:"submit",style:w({marginLeft:"var(--td-comp-margin-s)"})},{default:t(()=>[_(" 查询 ")]),_:1},8,["style"])),[[u,5]]),d((r(),m(v,{type:"reset",variant:"base",theme:"default"},{default:t(()=>[_(" 重置 ")]),_:1})),[[u,6]])]),_:1})]),_:1})]),_:1},8,["data"]),X("div",oe,[a(E,{data:l(e).buttonList,columns:l(te),"row-key":ne,"vertical-align":le,hover:se,pagination:l(e).pagination,loading:l(e).dataLoading,"header-affixed-top":P.value,onPageChange:N,onChange:z},{op:t(s=>[a($,null,{default:t(()=>[d((r(),m(k,{theme:"primary",onClick:j=>A(s)},{default:t(()=>[_("编辑")]),_:2},1032,["onClick"])),[[u,8]]),d((r(),m(k,{theme:"danger",onClick:j=>F(s)},{default:t(()=>[_("删除")]),_:2},1032,["onClick"])),[[u,9]])]),_:2},1024)]),_:1},8,["data","columns","pagination","loading","header-affixed-top"]),a(O,{visible:p.value,"onUpdate:visible":n[3]||(n[3]=s=>p.value=s),header:"确认删除当前按钮？",body:S.value,"on-cancel":L,onConfirm:T},null,8,["visible","body"])])])}}});const de=ee(ie,[["__scopeId","data-v-a639cf43"]]);export{de as default};
