import{d as w,r as i,ai as E,aj as y,j as C,w as I,m as r,o as O,c as j,a,q as t,v as p,ar as L,N as V}from"./index-9f7c584d.js";import{R,a as x}from"./constants-22cde1fe.js";const z=w({__name:"EditUser",setup(M){const d=i(null),e=i({username:"",nickname:"",email:"",phone:"",status:0,roleId:0}),b={value:"id",label:"name"},c=i([]),m=E(),f=y();C(()=>{f.getRoleListForSelect().then(()=>{c.value=f.roleListForSelect})}),I(()=>m.editVisible,s=>{s&&(e.value=m.currentRow)});const _=()=>{m.setEditVisible(!1)},U=()=>{d.value.reset()},g=()=>{d.value.validate({showErrorMessage:!0}).then(async s=>{var l,u;if(s===!0){await L({...e.value}),V.success("编辑成功"),m.getUserList(),_();return}if(s&&Object.keys(s).length){const n=(u=(l=Object.values(s)[0])==null?void 0:l[0])==null?void 0:u.message;V.warning(n)}})};return(s,l)=>{const u=r("t-input"),n=r("t-form-item"),v=r("t-select"),S=r("t-form"),k=r("t-space"),h=r("t-dialog");return O(),j("div",null,[a(h,{size:"large",visible:p(m).editVisible,header:"编辑用户","on-confirm":g,onClose:_},{default:t(()=>[a(k,{direction:"vertical",size:"large",style:{width:"100%"}},{default:t(()=>[a(S,{ref_key:"form",ref:d,data:e.value,rules:p(R),onReset:U},{default:t(()=>[a(n,{label:"用户名",name:"username"},{default:t(()=>[a(u,{modelValue:e.value.username,"onUpdate:modelValue":l[0]||(l[0]=o=>e.value.username=o),disabled:"",placeholder:"请输入"},null,8,["modelValue"])]),_:1}),a(n,{label:"昵称",name:"nickname"},{default:t(()=>[a(u,{modelValue:e.value.nickname,"onUpdate:modelValue":l[1]||(l[1]=o=>e.value.nickname=o),placeholder:"请输入"},null,8,["modelValue"])]),_:1}),a(n,{label:"邮箱",name:"email"},{default:t(()=>[a(u,{modelValue:e.value.email,"onUpdate:modelValue":l[2]||(l[2]=o=>e.value.email=o),placeholder:"请输入"},null,8,["modelValue"])]),_:1}),a(n,{label:"手机",name:"phone"},{default:t(()=>[a(u,{modelValue:e.value.phone,"onUpdate:modelValue":l[3]||(l[3]=o=>e.value.phone=o),placeholder:"请输入"},null,8,["modelValue"])]),_:1}),a(n,{label:"状态",name:"status"},{default:t(()=>[a(v,{modelValue:e.value.status,"onUpdate:modelValue":l[4]||(l[4]=o=>e.value.status=o),class:"form-item-content",options:p(x),placeholder:"请选择用户状态",clearable:""},null,8,["modelValue","options"])]),_:1}),a(n,{label:"角色",name:"menuId"},{default:t(()=>[a(v,{modelValue:e.value.roleId,"onUpdate:modelValue":l[5]||(l[5]=o=>e.value.roleId=o),keys:b,class:"form-item-content",options:c.value,placeholder:"请选择用户角色",clearable:""},null,8,["modelValue","options"])]),_:1})]),_:1},8,["data","rules"])]),_:1})]),_:1},8,["visible"])])}}});export{z as _};
